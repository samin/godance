{"version":3,"sources":["App.js","index.js"],"names":["intervalX","intervalY","randomIntFromInterval","min","max","Math","floor","random","absolutePosition","landmark","totalWidth","window","handsfree","debug","$canvas","pose","clientWidth","totalHeight","clientHeight","left","x","top","y","App","props","hitTarget","state","hits","targets","forEach","target","i","circleX","circleY","rad","newTarget","setState","stopHandsfree","stop","interval","clearInterval","falling","startHandsfree","time","falls","start","on","setInterval","map","speed","console","log","data","poseLandmarks","leftHand","rightHand","leftFoot","rightFoot","head","handle","glow","this","className","type","onClick","style","width","height","zIndex","position","overflow","border","backgroundColor","React","Component","Handsfree","showDebug","assetsPath","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b69743f3.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\n\nconst intervalX = [10, 90];\nconst intervalY = [10, 60];\n\nconst isTargetHit = (circleX, circleY, rad, x, y) => ((x - circleX) * (x - circleX)\n  + (y - circleY) * (y - circleY) <= rad * rad);\n\nconst randomIntFromInterval = ([min, max]) => (\n  Math.floor(Math.random() * (max - min + 1) + min) / 100\n);\n\nconst getRandomPosition = () => ({\n  x: randomIntFromInterval(intervalX),\n  y: randomIntFromInterval(intervalY),\n});\n\nconst absolutePosition = (landmark) => {\n  const totalWidth = window.handsfree.debug.$canvas.pose.clientWidth;\n  const totalHeight = window.handsfree.debug.$canvas.pose.clientHeight;\n\n  return {\n    left: (1 - landmark.x) * totalWidth,\n    top: landmark.y * totalHeight,\n  };\n};\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      handle: {\n        leftHand: { x: 0, y: 0, glow: false },\n        rightHand: { x: 0, y: 0, glow: false },\n        leftFoot: { x: 0, y: 0, glow: false },\n        rightFoot: { x: 0, y: 0, glow: false },\n        head: { x: 0, y: 0, glow: false },\n      },\n      hits: 0,\n      falls: 0,\n      time: 120,\n      targets: [\n        { x: 0.1, y: 0, speed: 0.02 },\n        { x: 0.2, y: 0.1, speed: 0.03 },\n        { x: 0.4, y: 0.2, speed: 0.02 },\n        { x: 0.5, y: 0.3, speed: 0.03 },\n        { x: 0.9, y: 0.4, speed: 0.02 },\n      ],\n    };\n  }\n\n  hitTarget = (landmark) => {\n    const { hits, targets } = this.state;\n    const tolerance = 0.07;\n\n    targets.forEach((target, i) => {\n      if (isTargetHit(target.x, target.y, tolerance, landmark.x, landmark.y)) {\n        const newTarget = getRandomPosition();\n\n        targets[i].x = newTarget.x;\n        targets[i].y = 0;\n\n        this.setState({ targets, hits: hits + 1 });\n      }\n    });\n  }\n\n  stopHandsfree = () => {\n    window.handsfree.stop();\n    if (this.interval) clearInterval(this.interval);\n    if (this.falling) clearInterval(this.falling);\n  }\n\n  startHandsfree = () => {\n    let { time, targets, falls } = this.state;\n\n    window.handsfree.start();\n\n    window.handsfree.on('modelReady', () => {\n      this.falling = setInterval(() => {\n        targets = targets.map((target) => {\n          if (target.y >= 1) falls += 1;\n\n          target.y = target.y > 1 ? 0 : (target.y + target.speed);\n          return target;\n        });\n\n        this.setState({ targets, falls });\n      }, 100);\n\n      this.interval = setInterval(() => {\n        time -= 1;\n        this.setState({ time }, () => {\n          if (time <= 0) {\n            console.log('time is up');\n            this.stopHandsfree();\n          }\n        });\n      }, 1000);\n    });\n\n    window.handsfree.on('data', (data) => {\n      if (!data.pose || !data.pose.poseLandmarks) return;\n\n      const leftHand = data.pose.poseLandmarks[19];\n      const rightHand = data.pose.poseLandmarks[20];\n      const leftFoot = data.pose.poseLandmarks[31];\n      const rightFoot = data.pose.poseLandmarks[32];\n      const head = data.pose.poseLandmarks[0];\n\n      this.setState({\n        handle: {\n          leftHand,\n          rightHand,\n          leftFoot,\n          rightFoot,\n          head,\n        },\n      });\n\n      this.hitTarget(leftHand);\n      this.hitTarget(rightHand);\n    });\n  }\n\n  render() {\n    const {\n      handle, targets, hits, falls, time,\n    } = this.state;\n\n    return (\n      <div className=\"App\">\n        <div className=\"controls\">\n          <div className=\"score\">\n            {`Score: ${hits - falls}`}\n          </div>\n          <div className=\"button\">\n            <button type=\"button\" className=\"handsfree-show-when-stopped handsfree-hide-when-loading\" onClick={this.startHandsfree}>Start</button>\n            <button type=\"button\" className=\"handsfree-show-when-loading\">Take 3 steps back and wait...</button>\n            <button type=\"button\" className=\"handsfree-show-when-started\" onClick={this.stopHandsfree}>Stop</button>\n          </div>\n          <div className=\"time\">\n            {`Time: ${time}`}\n          </div>\n        </div>\n        <div\n          style={{\n            width: window.handsfree.debug.$canvas.pose.clientWidth,\n            height: window.handsfree.debug.$canvas.pose.clientHeight,\n            zIndex: 1,\n            left: 0,\n            position: 'absolute',\n            overflow: 'hidden',\n          }}\n        >\n          <div\n            className=\"handle\"\n            style={{\n              ...absolutePosition(handle.leftHand),\n              border: '10px solid cyan',\n            }}\n          />\n\n          <div\n            className=\"handle\"\n            style={{\n              ...absolutePosition(handle.rightHand),\n              border: '10px solid cyan',\n            }}\n          />\n\n          <div\n            className=\"handle head\"\n            style={{\n              ...absolutePosition(handle.head),\n              border: '10px solid cyan',\n            }}\n          />\n\n          {targets.map((target, i) => (\n            <div\n              key={i}\n              className=\"target left hand\"\n              style={{\n                ...absolutePosition(target),\n                backgroundColor: target.speed === 0.02 ? 'yellow' : 'cyan',\n              }}\n            />\n          ))}\n        </div>\n\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Handsfree from 'handsfree';\nimport App from './App';\n\n// Include Handsfree.js and optional styles\nimport 'handsfree/build/lib/assets/handsfree.css';\n\n/**\n * Setup handsfree.js\n */\nwindow.handsfree = new Handsfree({\n  pose: true,\n  // hands: true,\n  showDebug: true,\n  // This is super important. Remember to eject the models into your public path\n  // Everywhere else: cp -r node_modules/handsfree/build/lib/* public\n  assetsPath: '/assets',\n});\n\n/**\n * Render App\n */\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}